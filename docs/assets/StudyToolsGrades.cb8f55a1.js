import{o as d,d as f,f as v,t as m,p as re,s as F,q as se,u as oe,a as ue,b as ce,r as b,v as T,c as de,e as N,g as o,w as r,H as me,n as W,h as e,_ as x,i as Y,T as ge,j as fe,x as Z,F as $,y as D,z as P,A as he,B as Q,l as u,C as L,D as ee,k as M,E as pe,G as ve}from"./index.8297f880.js";const _e=["data-insignificant","data-stretch"],ye={key:0},p={__name:"Metric",props:{description:String,extra:String,insignificant:Boolean,stretch:Boolean},setup(j){return(H,q)=>(d(),f("div",{class:"metric","data-insignificant":j.insignificant,"data-stretch":j.stretch},[v("span",null,m(j.description),1),v("span",null,[re(H.$slots,"default"),j.extra?(d(),f("span",ye," ("+m(j.extra)+")",1)):F("",!0)])],8,_e))}};const ke=v("p",{class:"section-about"},"Importeer je eerder geback-upte cijferoverzicht met onderstaande knop.",-1),be={id:"table-wrapper"},we=["data-excluded"],xe=["tabindex","aria-label","title","data-current","data-included","onClick","onKeyup"],$e={key:1},je={id:"bar-chart"},Se=["data-grade","data-frequency","data-percentage"],Ne={id:"calculator",key:"calculator"},De=["onClick","onKeyup"],Le={key:0},Fe=["data-x","data-y"],Ke={__name:"StudyToolsGrades",setup(j){se({title:"Cijferback-up"}),oe().setScheme("st");const{x:q,y:R,sourceType:Ce}=ue(),{width:K,height:O}=ce();Array.from({length:91},(n,i)=>i/10+1);const U=b(),B=b(),te=b();let g=b({aside:{state:!0,title:"Zijbalk",icon:"view_sidebar"},meta:{state:!0,title:"Details",icon:"info",requiresOne:!0},stats:{state:!0,title:"Statistieken",icon:"insights",requiresOne:!0,disallow:"calculator"},calculator:{state:!1,title:"Cijfercalculator",icon:"calculate",requiresOne:!0,disallow:"stats"}}),w=b([]),z=b(""),_=T(()=>{let n=[];return w.value.forEach((i,l)=>{var t;if(!k.value.has(l))for(let s of i){let a=Number((t=s.result)==null?void 0:t.replace(",",".")),c=s.className;(!(c!=null&&c.includes("gemiddeldecolumn"))||(c==null?void 0:c.includes("herkansingKolom"))||(c==null?void 0:c.includes("heeftonderliggendekolommen")))&&typeof a=="number"&&!isNaN(a)&&n.push(a)}}),n}),G=T(()=>_.value.filter(n=>n>=5.5)),A=T(()=>_.value.filter(n=>n<5.5)),S=T(()=>{const n=_.value.map(l=>Math.round(l)),i={};for(let l=1;l<=10;l++)i[l]=0;return n.forEach(l=>{l>=1&&l<=10&&i[l]++}),i}),k=b(new Set),y=b({result:"",weight:"",column:"",title:""}),h=b([]),C=b(1),ae=T(()=>{let n=[];for(let i=0,l=1;l<10;i++,l=l+.1)n[i]={x:l,y:E(h.value.map(t=>t.result).concat([l]),h.value.map(t=>t.weight).concat([C.value]))};return console.log(n),n});function I(n,i,l,t){if((n==null?void 0:n.length)>0&&(y.value={result:n,weight:i,column:l,title:t}),g.value.calculator.state&&(n==null?void 0:n.length)>0&&Number(n.replace(",","."))){let s=h.value.findIndex(a=>a.result===Number(n.replace(",","."))&&a.weight===Number(i)&&a.column===l&&a.title===t);s>=0?h.value.splice(s,1):h.value.push({result:Number(n.replace(",",".")),weight:Number(i),column:l,title:t})}}function ie(n){let i=g.value[n];g.value[n].state=!i.state,i.state&&i.disallow&&(g.value[i.disallow].state=!1),Object.values(g.value).filter(l=>l.requiresOne===!0).every(l=>!l.state)&&(Object.values(g.value).filter(l=>l.requiresOne===!0)[0].state=!0)}function V(n){k.value.has(n)?k.value.delete(n):k.value.add(n)}function ne(){w.value.forEach((n,i)=>{k.value.has(i)?k.value.delete(i):k.value.add(i)})}function le(n){w.value=[],z.value="",k.value.clear(),y.value={result:"",weight:"",column:"",title:""},h.value=[];let i=new FileReader;i.onload=async l=>{let t=JSON.parse(l.target.result);w.value.push(...t.list.reduce((s,a)=>(a.type==="rowheader"&&s.push([]),s[s.length-1].push(a),s),[[]])),z.value=new Date(t.date).toLocaleString("nl-NL",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},i.readAsText(n.target.files[0])}function E(n=[],i=[]){let l=n.map((s,a)=>{var X;let c=(X=i[a])!=null?X:1;return[s*c,c]}).reduce((s,a)=>[s[0]+a[0],s[1]+a[1]],[0,0]),t=l[0]/l[1];return isNaN(t)?void 0:t}function J(n=[]){let i=[...n].sort();var l=Math.floor(i.length/2);if(i.length%2)return i[l];let t=(i[l-1]+i[l])/2;return isNaN(t)?void 0:t}return(n,i)=>{const l=de("Button");return d(),f($,null,[(d(),N(ge,{to:"#hero"},[v("div",{style:W({transform:`translateX(${(e(q)-e(K)/2)*10/e(K)}px) translateY(${(e(R)-e(O)/2)*10/e(O)}px)`})},[o(me,{class:"section-title"},{default:r(()=>[u("Cijferback-up")]),_:1}),ke],4),o(x,{id:"hero-buttons"},{default:r(()=>[o(l,{icon:"upload_file",class:"hero",onClick:i[0]||(i[0]=t=>B.value.click())},{default:r(()=>[u(m(n.$i18n("Import grades")),1)]),_:1}),v("input",{type:"file",accept:".json",onChange:le,onInput:i[1]||(i[1]=t=>U.value.scrollIntoView({behavior:"smooth"})),ref_key:"input",ref:B,id:"input",style:{display:"none"}},null,544)]),_:1}),o(Y,{style:W({transform:`translateX(${-((e(q)-e(K)/2)*50/e(K))}px) translateY(${-((e(R)-e(O)/2)*50/e(O))}px)`})},{default:r(()=>[u(" school")]),_:1},8,["style"])])),v("section",{ref_key:"grades",ref:U,id:"grades",class:"full max-full"},[o(fe,{icon:"summarize"},{default:r(()=>[u("Cijferoverzicht")]),_:1}),o(x,{id:"grade-actions",wrap:""},{default:r(()=>[o(x,{gapless:""},{default:r(()=>[(d(!0),f($,null,D(e(g),(t,s)=>(d(),N(l,{icon:e(g)[s].icon,class:"narrow toggle","data-state":e(g)[s].state,title:e(g)[s].title+(e(g)[s].state?" verbergen":" weergeven"),onClick:a=>ie(s)},null,8,["icon","data-state","title","onClick"]))),256))]),_:1}),o(l,{icon:"deselect",class:"secondary",title:"Selectie omkeren",onClick:i[2]||(i[2]=t=>ne())}),o(l,{icon:"upload_file",class:"secondary",title:n.$i18n("Import grades"),onClick:i[3]||(i[3]=t=>B.value.click())},{default:r(()=>[u(m(n.$i18n("Import grades")),1)]),_:1},8,["title"])]),_:1}),v("div",{ref_key:"container",ref:te,id:"container",class:Z(e(g).aside.state?"":"hide-aside")},[v("div",be,[v("table",null,[(d(!0),f($,null,D(e(w),(t,s)=>(d(),f("tr",{"data-excluded":e(k).has(s),key:s},[(d(!0),f($,null,D(t,a=>(d(),f("td",{class:Z(a.className),key:a.column},[v("span",{tabindex:a.result?1:-1,role:"button","aria-label":a.result?`${(a.className.includes("gemiddeldecolumn")?"Gemiddeld ":"")+a.result} voor ${t[0].title}. Titel: ${a.title}. Kolom: ${a.column}. Telt ${a.weight} keer mee.`:"Lege cel",title:`${a.result||"Lege cel"}
${a.title||"Geen kolomkop"}`,"data-current":e(y).result===a.result&&e(y).weight===a.weight&&e(y).column===a.column&&e(y).title===a.title,"data-included":e(g).calculator.state&&e(h).some(c=>c.result===Number(String(a.result).replace(",","."))&&c.weight===Number(a.weight)&&c.column===a.column&&c.title===a.title),onClick:c=>I(a.result,a.weight,a.column,a.title),onKeyup:[L(c=>I(a.result,a.weight,a.column,a.title),["enter"]),L(c=>I(a.result,a.weight,a.column,a.title),["space"])]},m(a.type==="rowheader"?a.title:a.result),41,xe),a.type==="rowheader"?(d(),N(Y,{key:0,"aria-hidden":"false",role:"button",tabindex:"1",title:e(k).has(s)?"Weer aan selectie toevoegen":"Uit selectie verwijderen",onClick:c=>V(s),onKeyup:[L(c=>V(s),["enter"]),L(c=>V(s),["space"])]},{default:r(()=>[u(m(e(k).has(s)?"check_box_outline_blank":"check_box"),1)]),_:2},1032,["title","onClick","onKeyup"])):F("",!0)],2))),128))],8,we))),128))]),P(v("p",null,'Je cijferoverzicht zal hier verschijnen wanneer je deze hebt ge\xFCpload met de knop "'+m(n.$i18n("Import grades"))+'".',513),[[he,e(w).length===0]])]),o(Q,{name:"aside",tag:"div",id:"aside"},{default:r(()=>[e(g).meta.state?(d(),N(M,{id:"meta",key:"meta",small:""},ee({title:r(()=>[u("Details")]),content:r(()=>[e(w).length>0?(d(),N(x,{key:0,stretch:"",uniform:"",wrap:""},{default:r(()=>[o(p,{description:"Resultaat",stretch:""},{default:r(()=>[u(m(e(y).result||"?"),1)]),_:1}),o(p,{description:"Weegfactor",insignificant:""},{default:r(()=>[u(m(e(y).weight>0?e(y).weight+"\xD7":e(y).weight===0?"formatief":"?"),1)]),_:1}),o(p,{description:"Kolomnaam",insignificant:""},{default:r(()=>[u(m(e(y).column||"?"),1)]),_:1}),o(p,{description:"Kolomkop",insignificant:"",stretch:""},{default:r(()=>[u(m(e(y).title||"Klik op een cijfer"),1)]),_:1})]),_:1})):(d(),f("p",$e,"Upload je cijfers om details te bekijken."))]),_:2},[e(z)&&e(w).length>0?{name:"subtitle",fn:r(()=>[u("Gegevens ge\xEFmporteerd uit back-up van "+m(e(z)),1)]),key:"0"}:void 0]),1024)):F("",!0),e(g).stats.state?(d(),N(M,{id:"grade-stats",key:"grade-stats",small:""},ee({title:r(()=>[u("Statistieken")]),_:2},[e(_).length>0?{name:"content",fn:r(()=>[o(x,{stretch:"",uniform:"",wrap:""},{default:r(()=>[o(p,{description:"Gemiddelde (excl. weging)"},{default:r(()=>{var t;return[u(m(((t=E(e(_)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:3,maximumFractionDigits:3}))||"?"),1)]}),_:1}),o(p,{description:"Mediaan",insignificant:""},{default:r(()=>{var t;return[u(m(((t=J(e(_)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))||"?"),1)]}),_:1}),o(p,{description:"Aantal",insignificant:""},{default:r(()=>[u(m(e(_).length),1)]),_:1}),o(p,{description:"Voldoendes",insignificant:"",extra:e(G).length?(e(G).length/e(_).length*100).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})+"%":""},{default:r(()=>[u(m(e(G).length||"geen"),1)]),_:1},8,["extra"]),o(p,{description:"Onvoldoendes",insignificant:"",extra:e(A).length?(e(A).length/e(_).length*100).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})+"%":""},{default:r(()=>[u(m(e(A).length||"geen"),1)]),_:1},8,["extra"]),o(p,{description:"Laagste cijfer",insignificant:""},{default:r(()=>[u(m(Math.min(...e(_)).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})),1)]),_:1}),o(p,{description:"Hoogste cijfer",insignificant:""},{default:r(()=>[u(m(Math.max(...e(_)).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})),1)]),_:1})]),_:1}),o(p,{id:"bar-chart-title",description:"Histogram (afgeronde behaalde cijfers)"}),v("div",je,[(d(),f($,null,D(10,t=>v("div",{"data-grade":t,"data-frequency":e(S)[t],"data-percentage":Math.round(e(S)[t]/e(_).length*100),style:W(`min-height: ${e(S)[t]/Math.max(...Object.values(e(S)))*100||0}%; max-height: ${e(S)[t]/Math.max(...Object.values(e(S)))*100||0}%`)},null,12,Se)),64))])]),key:"0"}:{name:"content",fn:r(()=>[u(" Er zijn geen cijfers geselecteerd. ")]),key:"1"}]),1024)):F("",!0),e(g).calculator.state?(d(),f("div",Ne,[o(M,{id:"calculator-added",small:""},{title:r(()=>[u("Toegevoegde cijfers")]),content:r(()=>[o(Q,{name:"list",tag:"ul"},{default:r(()=>[(d(!0),f($,null,D(e(h),(t,s)=>(d(),f("li",{key:t.column,tabindex:"1",role:"button",onClick:a=>e(h).splice(s,1),onKeyup:[L(a=>e(h).splice(s,1),["enter"]),L(a=>e(h).splice(s,1),["space"])]},m(`${t.result.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})} (${t.weight}\xD7) \u2014 ${t.column}, ${t.title}`),41,De))),128)),e(h).length<1?(d(),f("li",Le,"Klik op de cijfers die je wilt toevoegen aan de berekening.")):F("",!0)]),_:1})]),_:1}),o(M,{id:"calculator-result",small:""},{content:r(()=>[o(x,{stretch:"",uniform:"",wrap:""},{default:r(()=>[o(p,{description:"Gemiddelde (incl. weging)"},{default:r(()=>{var t;return[u(m(((t=E(e(h).map(s=>s.result),e(h).map(s=>s.weight)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))||"?"),1)]}),_:1}),o(p,{description:"Mediaan"},{default:r(()=>{var t;return[u(m(((t=J(e(h).map(s=>s.result)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))||"?"),1)]}),_:1})]),_:1})]),_:1}),o(M,{id:"calculator-chart",small:""},{title:r(()=>[u("Toekomstig cijfer")]),subtitle:r(()=>[u("Zie hier wat je moet halen en wat je komt te staan.")]),content:r(()=>[P(v("input",{type:"number","onUpdate:modelValue":i[4]||(i[4]=t=>ve(C)?C.value=t:C=t)},null,512),[[pe,e(C)]]),o(x,{stretch:"",gapless:""},{default:r(()=>[(d(!0),f($,null,D(e(ae),t=>(d(),f("div",{class:"grid-column","data-x":t.x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}),"data-y":t.y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2})},null,8,Fe))),256))]),_:1})]),_:1})])):F("",!0)]),_:1})],2)],512)],64)}}};export{Ke as default};
