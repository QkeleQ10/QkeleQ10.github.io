import{o as s,c as g,f as S,t as u,j as ne,i as F,q as le,u as re,r as k,l as D,a as se,h as e,b as x,w as r,g as Y,e as c,m as q,F as C,n as M,p as ee,v as oe,s as te,d,x as B,y as z,_ as ue,k as T,z as ie,A as ce,B as de}from"./index.022612d5.js";import{_ as A}from"./Card.812b78eb.js";const me=["data-insignificant","data-stretch"],ge={key:0},_={__name:"Metric",props:{description:String,extra:String,insignificant:Boolean,stretch:Boolean},setup(L){return(R,U)=>(s(),g("div",{class:"metric","data-insignificant":L.insignificant,"data-stretch":L.stretch},[S("span",null,u(L.description),1),S("span",null,[ne(R.$slots,"default"),L.extra?(s(),g("span",ge," ("+u(L.extra)+")",1)):F("",!0)])],8,me))}};const fe={id:"table-wrapper"},he=["data-excluded"],pe=["tabindex","aria-label","title","data-current","data-included","onClick","onKeyup"],ve={key:1},_e={id:"bar-chart"},ye=["data-grade","data-frequency","data-percentage"],ke={id:"calculator",key:"calculator"},xe=["onClick","onKeyup"],be={key:0},we={key:"hovering-increase"},je={key:"hovering-decrease"},Se={key:"hovering-same"},Fe={key:"sufficient-guaranteed"},$e={key:"insufficient-guaranteed"},De={key:"advice"},Le={key:"placeholder"},Ne=["data-x","data-y","onMouseenter"],Ke={__name:"StudyToolsGrades",setup(L){le({title:"Cijferback-up | Study Tools"}),re().setScheme("st");const U=k(),Z=k();k();let j=k(!(window.innerWidth<1e3)),f=k({meta:{state:!0,title:"Details",icon:"info",requiresOne:!0},stats:{state:!0,title:"Statistieken",icon:"analytics",requiresOne:!0,disallow:"calculator"},calculator:{state:!1,title:"Cijfercalculator",icon:"calculate",requiresOne:!0,disallow:"stats"}}),b=k([]),J=k(""),y=D(()=>{let n=[];return b.value.forEach((l,a)=>{var t;if(!v.value.has(a))for(let o of l){let i=Number((t=o.result)==null?void 0:t.replace(",",".")),m=o.className;(!(m!=null&&m.includes("gemiddeldecolumn"))||(m==null?void 0:m.includes("herkansingKolom"))||(m==null?void 0:m.includes("heeftonderliggendekolommen")))&&typeof i=="number"&&!isNaN(i)&&n.push(i)}}),n}),G=D(()=>y.value.filter(n=>n>=5.5)),V=D(()=>y.value.filter(n=>n<5.5)),N=D(()=>{const n=y.value.map(a=>Math.round(a)),l={};for(let a=1;a<=10;a++)l[a]=0;return n.forEach(a=>{a>=1&&a<=10&&l[a]++}),l}),v=k(new Set),w=k({result:"",weight:"",column:"",title:""}),h=k([]),p=k({x:0,y:0}),$=k(1),O=D(()=>H(h.value.map(n=>n.result),h.value.map(n=>n.weight))),P=D(()=>{let n=[];for(let l=0,a=1;a<10;l++,a=a+.1)n[l]={x:a,y:H(h.value.map(t=>t.result).concat([a]),h.value.map(t=>t.weight).concat([$.value]))||0};return n}),K=D(()=>P.value.find(n=>n.y>=5.45)||{x:0,y:0});function E(n,l,a,t){if((n==null?void 0:n.length)>0&&(w.value={result:n,weight:l,column:a,title:t}),f.value.calculator.state&&(n==null?void 0:n.length)>0&&Number(n.replace(",","."))){let o=h.value.findIndex(i=>i.result===Number(n.replace(",","."))&&i.weight===Number(l)&&i.column===a&&i.title===t);o>=0?h.value.splice(o,1):h.value.push({result:Number(n.replace(",",".")),weight:Number(l),column:a,title:t})}}function ae(n){let l=f.value[n];f.value[n].state=!l.state,l.state&&l.disallow&&(f.value[l.disallow].state=!1),Object.values(f.value).filter(a=>a.requiresOne===!0).every(a=>!a.state)&&(Object.values(f.value).filter(a=>a.requiresOne===!0)[0].state=!0)}function I(n){v.value.has(n)?v.value.delete(n):v.value.add(n)}function W(n){n?v.value.clear():b.value.forEach((l,a)=>{a!==0&&(v.value.has(a)?v.value.delete(a):v.value.add(a))})}function H(n=[],l=[]){let a=n.map((o,i)=>{var X;let m=(X=l[i])!=null?X:1;return[o*m,m]}).reduce((o,i)=>[o[0]+i[0],o[1]+i[1]],[0,0]),t=a[0]/a[1];return isNaN(t)?void 0:t}function Q(n=[]){let l=[...n].sort();var a=Math.floor(l.length/2);if(l.length%2)return l[a];let t=(l[a-1]+l[a])/2;return isNaN(t)?void 0:t}return(n,l)=>{const a=se("Button");return s(),g("section",{ref_key:"grades",ref:U,id:"grades",class:te(e(j)?"full max-full":"full max-full hide-aside")},[e(f).calculator.state?(s(),x(Y,{key:0,icon:"summarize"},{default:r(()=>[d("Cijfercalculator")]),_:1})):(s(),x(Y,{key:1,icon:"summarize"},{default:r(()=>[d("Cijferoverzicht")]),_:1})),c(q,{name:"horizontal",tag:"div",class:"collection-horizontal no-row-gap wrap",id:"grade-actions"},{default:r(()=>[e(b).length>0&&e(v).size===0&&!e(f).calculator.state?(s(),x(a,{key:"select-empty",icon:"deselect",class:"secondary",title:"Alles deselecteren",onClick:l[0]||(l[0]=t=>W())},{default:r(()=>[d(" Alles deselecteren ")]),_:1})):e(b).length>0&&e(v).size>0&&!e(f).calculator.state?(s(),x(a,{key:"select-all",icon:"select_all",class:"secondary",title:"Alles selecteren",onClick:l[1]||(l[1]=t=>W(!0))},{default:r(()=>[d(" Alles selecteren ")]),_:1})):F("",!0),e(b).length>0&&e(v).size>0&&e(v).size<e(b).length-1&&!e(f).calculator.state?(s(),x(a,{key:"select-invert",icon:"indeterminate_check_box",class:"secondary",title:"Selectie omkeren",onClick:l[2]||(l[2]=t=>W())},{default:r(()=>[d(" Selectie omkeren ")]),_:1})):F("",!0),e(b).length<1?(s(),x(a,{key:"import-big",icon:"upload",title:n.$i18n("Import grades"),onClick:l[3]||(l[3]=t=>Z.value.click())},{default:r(()=>[d(u(n.$i18n("Import grades")),1)]),_:1},8,["title"])):(s(),x(a,{key:"import-small",icon:"upload",class:"secondary",title:n.$i18n("Import grades"),onClick:l[4]||(l[4]=t=>Z.value.click())},null,8,["title"])),c(a,{key:"aside-toggler",role:"checkbox",class:"secondary",title:"Zijpaneel weergeven of verbergen",icon:e(j)?"right_panel_close":"right_panel_open",filled:e(j),"aria-checked":e(j),onClick:l[5]||(l[5]=t=>B(j)?j.value=!e(j):j=!e(j))},null,8,["icon","filled","aria-checked"])]),_:1}),S("div",fe,[S("table",null,[(s(!0),g(C,null,M(e(b),(t,o)=>(s(),g("tr",{"data-excluded":e(v).has(o),key:o},[(s(!0),g(C,null,M(t,i=>(s(),g("td",{class:te(i.className),key:i.column},[S("span",{tabindex:i.result?1:-1,role:"button","aria-label":i.result?`${(i.className.includes("gemiddeldecolumn")?"Gemiddeld ":"")+i.result} voor ${t[0].title}. Titel: ${i.title}. Kolom: ${i.column}. Telt ${i.weight} keer mee.`:"Lege cel",title:`${i.result||"Lege cel"}
${i.title||"Geen kolomkop"}`,"data-current":e(w).result===i.result&&e(w).weight===i.weight&&e(w).column===i.column&&e(w).title===i.title,"data-included":e(f).calculator.state&&e(h).some(m=>m.result===Number(String(i.result).replace(",","."))&&m.weight===Number(i.weight)&&m.column===i.column&&m.title===i.title),onClick:m=>E(i.result,i.weight,i.column,i.title),onKeyup:[z(m=>E(i.result,i.weight,i.column,i.title),["enter"]),z(m=>E(i.result,i.weight,i.column,i.title),["space"])]},u(i.type==="rowheader"?i.title:i.result),41,pe),i.type==="rowheader"?(s(),x(ue,{key:0,"aria-hidden":"false",role:"button",tabindex:"1",title:e(v).has(o)?"Weer aan selectie toevoegen":"Uit selectie verwijderen",filled:!e(v).has(o),onClick:m=>I(o),onKeyup:[z(m=>I(o),["enter"]),z(m=>I(o),["space"])]},{default:r(()=>[d(u(e(v).has(o)?"crop_square":"check_box"),1)]),_:2},1032,["title","filled","onClick","onKeyup"])):F("",!0)],2))),128))],8,he))),128))]),ee(S("p",null,'Je cijferoverzicht zal hier verschijnen wanneer je deze hebt ge\xFCpload met de knop "'+u(n.$i18n("Import grades"))+'".',513),[[oe,e(b).length===0]])]),c(q,{name:"aside",tag:"div",id:"aside"},{default:r(()=>[c(T,{id:"view",key:"view",gapless:"",stretch:"",uniform:""},{default:r(()=>[(s(!0),g(C,null,M(e(f),(t,o)=>(s(),x(a,{icon:e(f)[o].icon,filled:e(f)[o].state,role:"checkbox",class:"secondary","aria-checked":e(f)[o].state,title:e(f)[o].title+(e(f)[o].state?" verbergen":" weergeven"),onClick:i=>ae(o)},null,8,["icon","filled","aria-checked","title","onClick"]))),256))]),_:1}),e(f).meta.state?(s(),x(A,{id:"meta",key:"meta",small:""},ie({title:r(()=>[d("Details")]),content:r(()=>[e(b).length>0?(s(),x(T,{key:0,stretch:"",uniform:"",wrap:""},{default:r(()=>[c(_,{description:"Resultaat",stretch:""},{default:r(()=>[d(u(e(w).result||"?"),1)]),_:1}),c(_,{description:"Weegfactor",insignificant:""},{default:r(()=>[d(u(e(w).weight>0?e(w).weight+"\xD7":e(w).weight===0?"formatief":"?"),1)]),_:1}),c(_,{description:"Kolomnaam",insignificant:""},{default:r(()=>[d(u(e(w).column||"?"),1)]),_:1}),c(_,{description:"Kolomkop",insignificant:"",stretch:""},{default:r(()=>[d(u(e(w).title||"Klik op een cijfer"),1)]),_:1})]),_:1})):(s(),g("p",ve,"Upload je cijfers om details te bekijken."))]),_:2},[e(J)&&e(b).length>0?{name:"subtitle",fn:r(()=>[d("Gegevens ge\xEFmporteerd uit back-up van "+u(e(J)),1)]),key:"0"}:void 0]),1024)):F("",!0),e(f).stats.state?(s(),x(A,{id:"grade-stats",key:"grade-stats",small:""},ie({title:r(()=>[d("Statistieken")]),_:2},[e(y).length>0?{name:"content",fn:r(()=>[c(T,{stretch:"",uniform:"",wrap:""},{default:r(()=>[c(_,{description:"Gemiddelde (excl. weging)"},{default:r(()=>{var t;return[d(u(((t=H(e(y)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:3,maximumFractionDigits:3}))||"?"),1)]}),_:1}),c(_,{description:"Mediaan",insignificant:""},{default:r(()=>{var t;return[d(u(((t=Q(e(y)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))||"?"),1)]}),_:1}),c(_,{description:"Aantal",insignificant:""},{default:r(()=>[d(u(e(y).length),1)]),_:1}),c(_,{description:"Voldoendes",insignificant:"",extra:e(G).length?(e(G).length/e(y).length*100).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})+"%":""},{default:r(()=>[d(u(e(G).length||"geen"),1)]),_:1},8,["extra"]),c(_,{description:"Onvoldoendes",insignificant:"",extra:e(V).length?(e(V).length/e(y).length*100).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})+"%":""},{default:r(()=>[d(u(e(V).length||"geen"),1)]),_:1},8,["extra"]),c(_,{description:"Laagste cijfer",insignificant:""},{default:r(()=>[d(u(Math.min(...e(y)).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})),1)]),_:1}),c(_,{description:"Hoogste cijfer",insignificant:""},{default:r(()=>[d(u(Math.max(...e(y)).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})),1)]),_:1})]),_:1}),c(_,{id:"bar-chart-title",description:"Histogram (afgeronde behaalde cijfers)"}),S("div",_e,[(s(),g(C,null,M(10,t=>S("div",{"data-grade":t,"data-frequency":e(N)[t],"data-percentage":Math.round(e(N)[t]/e(y).length*100),style:ce(`min-height: ${e(N)[t]/Math.max(...Object.values(e(N)))*100||0}%; max-height: ${e(N)[t]/Math.max(...Object.values(e(N)))*100||0}%`)},null,12,ye)),64))])]),key:"0"}:{name:"content",fn:r(()=>[d(" Er zijn geen cijfers geselecteerd. ")]),key:"1"}]),1024)):F("",!0),e(f).calculator.state?(s(),g("div",ke,[c(A,{id:"calculator-added",small:""},{title:r(()=>[d("Toegevoegde cijfers")]),content:r(()=>[c(q,{name:"list",tag:"ul"},{default:r(()=>[(s(!0),g(C,null,M(e(h),(t,o)=>(s(),g("li",{key:t.column,tabindex:"1",role:"button",onClick:i=>e(h).splice(o,1),onKeyup:[z(i=>e(h).splice(o,1),["enter"]),z(i=>e(h).splice(o,1),["space"])]},u(`${t.result.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})} (${t.weight}\xD7) \u2014 ${t.column}, ${t.title}`),41,xe))),128)),e(h).length<1?(s(),g("p",be," Klik op de cijfers die je wilt toevoegen aan de berekening. ")):F("",!0)]),_:1})]),_:1}),c(A,{id:"calculator-result",small:""},{content:r(()=>[c(T,{stretch:"",uniform:"",wrap:""},{default:r(()=>[c(_,{description:"Gemiddelde (incl. weging)"},{default:r(()=>{var t;return[d(u(((t=e(O))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))||"?"),1)]}),_:1}),c(_,{description:"Mediaan"},{default:r(()=>{var t;return[d(u(((t=Q(e(h).map(o=>o.result)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))||"?"),1)]}),_:1})]),_:1})]),_:1}),c(A,{id:"calculator-chart",small:""},{title:r(()=>[d("Toekomstig cijfer")]),subtitle:r(()=>[c(q,{name:"list"},{default:r(()=>[e(p).x&&e(p).y.toFixed(2)>e(O).toFixed(2)?(s(),g("span",we," Als je een "+u(e(p).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" haalt, dan stijgt je gemiddelde tot een "+u(e(p).y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+". ",1)):e(p).x&&e(p).y.toFixed(2)<e(O).toFixed(2)?(s(),g("span",je," Als je een "+u(e(p).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" haalt, dan zakt je gemiddelde tot een "+u(e(p).y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+". ",1)):e(p).x>0?(s(),g("span",Se," Als je een "+u(e(p).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" haalt, dan blijf je gemiddeld een "+u(e(p).y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+" staan. ",1)):e(h).length>0&&e(K).x<1.05?(s(),g("span",Fe," Met een cijfer dat "+u(e($))+"\xD7 meetelt blijf je in elk geval een voldoende staan. ",1)):e(h).length>0&&e(K).y<5.45?(s(),g("span",$e," Met een cijfer dat "+u(e($))+"\xD7 meetelt kun je geen voldoende komen te staan.. ",1)):e(h).length>0&&e(K).x>1.05?(s(),g("span",De," Haal een "+u(e(K).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" "+u(e(K).x<=9.95?"of hoger":"")+" om een voldoende te "+u(e(O)>=5.45?"blijven":"komen")+" staan. ",1)):(s(),g("span",Le," Zie hier wat je moet halen en wat je komt te staan. "))]),_:1})]),content:r(()=>[ee(S("input",{type:"number","onUpdate:modelValue":l[6]||(l[6]=t=>B($)?$.value=t:$=t)},null,512),[[de,e($)]]),c(T,{stretch:"",gapless:"",onMouseleave:l[7]||(l[7]=t=>B(p)?p.value={}:p={})},{default:r(()=>[(s(!0),g(C,null,M(e(P),t=>(s(),g("div",{class:"grid-column","data-x":t.x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}),"data-y":t.y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}),onMouseenter:o=>B(p)?p.value={x:t.x,y:t.y}:p={x:t.x,y:t.y}},null,40,Ne))),256))]),_:1})]),_:1})])):F("",!0)]),_:1})],2)}}};export{Ke as default};
