import{o,d as g,f as y,t as u,p as de,s as L,q as me,u as ge,a as fe,b as he,r as w,v as F,c as pe,e as j,g as c,w as r,H as ve,n as X,h as e,_ as D,i as ae,T as ye,j as _e,x as le,F as N,y as T,z as re,A as ke,B as Y,l as d,C as V,D as z,E as se,k as K,G as xe}from"./index.6164b632.js";const be=["data-insignificant","data-stretch"],we={key:0},v={__name:"Metric",props:{description:String,extra:String,insignificant:Boolean,stretch:Boolean},setup(C){return(P,E)=>(o(),g("div",{class:"metric","data-insignificant":C.insignificant,"data-stretch":C.stretch},[y("span",null,u(C.description),1),y("span",null,[de(P.$slots,"default"),C.extra?(o(),g("span",we," ("+u(C.extra)+")",1)):L("",!0)])],8,be))}};const je=y("p",{class:"section-about"},"Importeer je eerder geback-upte cijferoverzicht met onderstaande knop.",-1),Se={id:"table-wrapper"},$e=["data-excluded"],Fe=["tabindex","aria-label","title","data-current","data-included","onClick","onKeyup"],De={key:1},Ne={id:"bar-chart"},Le=["data-grade","data-frequency","data-percentage"],Ce={id:"calculator",key:"calculator"},Me=["onClick","onKeyup"],Te={key:0},ze={key:"hovering-increase"},Oe={key:"hovering-decrease"},Ke={key:"hovering-same"},qe={key:"sufficient-guaranteed"},Ge={key:"insufficient-guaranteed"},Ae={key:"advice"},Be={key:"placeholder"},Ie=["data-x","data-y","onMouseenter"],We={__name:"StudyToolsGrades",setup(C){me({title:"Cijferback-up"}),ge().setScheme("st");const{x:E,y:Q,sourceType:Ve}=fe(),{width:q,height:G}=he(),ee=w(),A=w(),oe=w();let S=w(!(window.innerWidth<1e3)),p=w({meta:{state:!0,title:"Details",icon:"info",requiresOne:!0},stats:{state:!0,title:"Statistieken",icon:"monitoring",requiresOne:!0,disallow:"calculator"},calculator:{state:!1,title:"Cijfercalculator",icon:"calculate",requiresOne:!0,disallow:"stats"}}),_=w([]),B=w(""),x=F(()=>{let a=[];return _.value.forEach((n,l)=>{var t;if(!k.value.has(l))for(let s of n){let i=Number((t=s.result)==null?void 0:t.replace(",",".")),m=s.className;(!(m!=null&&m.includes("gemiddeldecolumn"))||(m==null?void 0:m.includes("herkansingKolom"))||(m==null?void 0:m.includes("heeftonderliggendekolommen")))&&typeof i=="number"&&!isNaN(i)&&a.push(i)}}),a}),H=F(()=>x.value.filter(a=>a>=5.5)),W=F(()=>x.value.filter(a=>a<5.5)),M=F(()=>{const a=x.value.map(l=>Math.round(l)),n={};for(let l=1;l<=10;l++)n[l]=0;return a.forEach(l=>{l>=1&&l<=10&&n[l]++}),n}),k=w(new Set),b=w({result:"",weight:"",column:"",title:""}),f=w([]),h=w({x:0,y:0}),$=w(1),I=F(()=>Z(f.value.map(a=>a.result),f.value.map(a=>a.weight))),te=F(()=>{let a=[];for(let n=0,l=1;l<10;n++,l=l+.1)a[n]={x:l,y:Z(f.value.map(t=>t.result).concat([l]),f.value.map(t=>t.weight).concat([$.value]))||0};return a}),O=F(()=>te.value.find(a=>a.y>=5.45)||{x:0,y:0});function R(a,n,l,t){if((a==null?void 0:a.length)>0&&(b.value={result:a,weight:n,column:l,title:t}),p.value.calculator.state&&(a==null?void 0:a.length)>0&&Number(a.replace(",","."))){let s=f.value.findIndex(i=>i.result===Number(a.replace(",","."))&&i.weight===Number(n)&&i.column===l&&i.title===t);s>=0?f.value.splice(s,1):f.value.push({result:Number(a.replace(",",".")),weight:Number(n),column:l,title:t})}}function ue(a){let n=p.value[a];p.value[a].state=!n.state,n.state&&n.disallow&&(p.value[n.disallow].state=!1),Object.values(p.value).filter(l=>l.requiresOne===!0).every(l=>!l.state)&&(Object.values(p.value).filter(l=>l.requiresOne===!0)[0].state=!0)}function J(a){k.value.has(a)?k.value.delete(a):k.value.add(a)}function U(){_.value.forEach((a,n)=>{k.value.has(n)?k.value.delete(n):k.value.add(n)})}function ce(a){_.value=[],B.value="",k.value.clear(),b.value={result:"",weight:"",column:"",title:""},f.value=[];let n=new FileReader;n.onload=async l=>{let t=JSON.parse(l.target.result);_.value.push(...t.list.reduce((s,i)=>(i.type==="rowheader"&&s.push([]),s[s.length-1].push(i),s),[[]])),B.value=new Date(t.date).toLocaleString("nl-NL",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},n.readAsText(a.target.files[0])}function Z(a=[],n=[]){let l=a.map((s,i)=>{var ne;let m=(ne=n[i])!=null?ne:1;return[s*m,m]}).reduce((s,i)=>[s[0]+i[0],s[1]+i[1]],[0,0]),t=l[0]/l[1];return isNaN(t)?void 0:t}function ie(a=[]){let n=[...a].sort();var l=Math.floor(n.length/2);if(n.length%2)return n[l];let t=(n[l-1]+n[l])/2;return isNaN(t)?void 0:t}return(a,n)=>{const l=pe("Button");return o(),g(N,null,[(o(),j(ye,{to:"#hero"},[y("div",{style:X({transform:`translateX(${(e(E)-e(q)/2)*10/e(q)}px) translateY(${(e(Q)-e(G)/2)*10/e(G)}px)`})},[c(ve,{class:"section-title"},{default:r(()=>[d("Cijferback-up")]),_:1}),je],4),c(D,{id:"hero-buttons"},{default:r(()=>[c(l,{icon:"upload",class:"hero",onClick:n[0]||(n[0]=t=>A.value.click())},{default:r(()=>[d(u(a.$i18n("Import grades")),1)]),_:1}),y("input",{type:"file",accept:"application/JSON",onChange:ce,onInput:n[1]||(n[1]=t=>ee.value.scrollIntoView({behavior:"smooth"})),ref_key:"input",ref:A,id:"input",style:{display:"none"}},null,544)]),_:1}),c(ae,{style:X({transform:`translateX(${-((e(E)-e(q)/2)*50/e(q))}px) translateY(${-((e(Q)-e(G)/2)*50/e(G))}px)`})},{default:r(()=>[d(" school")]),_:1},8,["style"])])),y("section",{ref_key:"grades",ref:ee,id:"grades",class:"full max-full"},[c(_e,{icon:"summarize"},{default:r(()=>[d("Cijferoverzicht")]),_:1}),c(D,{id:"grade-actions",wrap:"",class:"no-row-gap"},{default:r(()=>[c(l,{id:"aside-toggler",role:"checkbox",class:"secondary",title:"Zijbalk weergeven of verbergen",icon:"dock_to_left","aria-checked":e(S),onClick:n[2]||(n[2]=t=>V(S)?S.value=!e(S):S=!e(S))},{default:r(()=>[d("Zijbalk")]),_:1},8,["aria-checked"]),e(_).length>0&&e(k).size===0?(o(),j(l,{key:0,icon:"remove_selection",class:"secondary",title:"Selectie legen",onClick:n[3]||(n[3]=t=>U())},{default:r(()=>[d(" Selectie legen ")]),_:1})):e(_).length>0&&e(k).size===e(_).length?(o(),j(l,{key:1,icon:"select",class:"secondary",title:"Selectie vullen",onClick:n[4]||(n[4]=t=>U())},{default:r(()=>[d(" Selectie vullen ")]),_:1})):e(_).length>0?(o(),j(l,{key:2,icon:"select",class:"secondary",title:"Selectie omkeren",onClick:n[5]||(n[5]=t=>U())},{default:r(()=>[d(" Selectie omkeren ")]),_:1})):L("",!0),e(_).length<1?(o(),j(l,{key:3,icon:"upload",title:a.$i18n("Import grades"),onClick:n[6]||(n[6]=t=>A.value.click())},{default:r(()=>[d(u(a.$i18n("Import grades")),1)]),_:1},8,["title"])):(o(),j(l,{key:4,icon:"upload",class:"secondary",title:a.$i18n("Import grades"),onClick:n[7]||(n[7]=t=>A.value.click())},null,8,["title"]))]),_:1}),y("div",{ref_key:"container",ref:oe,id:"container",class:le(e(S)?"":"hide-aside")},[y("div",Se,[y("table",null,[(o(!0),g(N,null,T(e(_),(t,s)=>(o(),g("tr",{"data-excluded":e(k).has(s),key:s},[(o(!0),g(N,null,T(t,i=>(o(),g("td",{class:le(i.className),key:i.column},[y("span",{tabindex:i.result?1:-1,role:"button","aria-label":i.result?`${(i.className.includes("gemiddeldecolumn")?"Gemiddeld ":"")+i.result} voor ${t[0].title}. Titel: ${i.title}. Kolom: ${i.column}. Telt ${i.weight} keer mee.`:"Lege cel",title:`${i.result||"Lege cel"}
${i.title||"Geen kolomkop"}`,"data-current":e(b).result===i.result&&e(b).weight===i.weight&&e(b).column===i.column&&e(b).title===i.title,"data-included":e(p).calculator.state&&e(f).some(m=>m.result===Number(String(i.result).replace(",","."))&&m.weight===Number(i.weight)&&m.column===i.column&&m.title===i.title),onClick:m=>R(i.result,i.weight,i.column,i.title),onKeyup:[z(m=>R(i.result,i.weight,i.column,i.title),["enter"]),z(m=>R(i.result,i.weight,i.column,i.title),["space"])]},u(i.type==="rowheader"?i.title:i.result),41,Fe),i.type==="rowheader"?(o(),j(ae,{key:0,"aria-hidden":"false",role:"button",tabindex:"1",title:e(k).has(s)?"Weer aan selectie toevoegen":"Uit selectie verwijderen",onClick:m=>J(s),onKeyup:[z(m=>J(s),["enter"]),z(m=>J(s),["space"])]},{default:r(()=>[d(u(e(k).has(s)?"select":"remove_selection"),1)]),_:2},1032,["title","onClick","onKeyup"])):L("",!0)],2))),128))],8,$e))),128))]),re(y("p",null,'Je cijferoverzicht zal hier verschijnen wanneer je deze hebt ge\xFCpload met de knop "'+u(a.$i18n("Import grades"))+'".',513),[[ke,e(_).length===0]])]),c(Y,{name:"aside",tag:"div",id:"aside"},{default:r(()=>[c(D,{id:"view",key:"view",gapless:"",stretch:"",uniform:""},{default:r(()=>[(o(!0),g(N,null,T(e(p),(t,s)=>(o(),j(l,{icon:e(p)[s].icon,role:"checkbox",class:"secondary","aria-checked":e(p)[s].state,title:e(p)[s].title+(e(p)[s].state?" verbergen":" weergeven"),onClick:i=>ue(s)},null,8,["icon","aria-checked","title","onClick"]))),256))]),_:1}),e(p).meta.state?(o(),j(K,{id:"meta",key:"meta",small:""},se({title:r(()=>[d("Details")]),content:r(()=>[e(_).length>0?(o(),j(D,{key:0,stretch:"",uniform:"",wrap:""},{default:r(()=>[c(v,{description:"Resultaat",stretch:""},{default:r(()=>[d(u(e(b).result||"?"),1)]),_:1}),c(v,{description:"Weegfactor",insignificant:""},{default:r(()=>[d(u(e(b).weight>0?e(b).weight+"\xD7":e(b).weight===0?"formatief":"?"),1)]),_:1}),c(v,{description:"Kolomnaam",insignificant:""},{default:r(()=>[d(u(e(b).column||"?"),1)]),_:1}),c(v,{description:"Kolomkop",insignificant:"",stretch:""},{default:r(()=>[d(u(e(b).title||"Klik op een cijfer"),1)]),_:1})]),_:1})):(o(),g("p",De,"Upload je cijfers om details te bekijken."))]),_:2},[e(B)&&e(_).length>0?{name:"subtitle",fn:r(()=>[d("Gegevens ge\xEFmporteerd uit back-up van "+u(e(B)),1)]),key:"0"}:void 0]),1024)):L("",!0),e(p).stats.state?(o(),j(K,{id:"grade-stats",key:"grade-stats",small:""},se({title:r(()=>[d("Statistieken")]),_:2},[e(x).length>0?{name:"content",fn:r(()=>[c(D,{stretch:"",uniform:"",wrap:""},{default:r(()=>[c(v,{description:"Gemiddelde (excl. weging)"},{default:r(()=>{var t;return[d(u(((t=Z(e(x)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:3,maximumFractionDigits:3}))||"?"),1)]}),_:1}),c(v,{description:"Mediaan",insignificant:""},{default:r(()=>{var t;return[d(u(((t=ie(e(x)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))||"?"),1)]}),_:1}),c(v,{description:"Aantal",insignificant:""},{default:r(()=>[d(u(e(x).length),1)]),_:1}),c(v,{description:"Voldoendes",insignificant:"",extra:e(H).length?(e(H).length/e(x).length*100).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})+"%":""},{default:r(()=>[d(u(e(H).length||"geen"),1)]),_:1},8,["extra"]),c(v,{description:"Onvoldoendes",insignificant:"",extra:e(W).length?(e(W).length/e(x).length*100).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})+"%":""},{default:r(()=>[d(u(e(W).length||"geen"),1)]),_:1},8,["extra"]),c(v,{description:"Laagste cijfer",insignificant:""},{default:r(()=>[d(u(Math.min(...e(x)).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})),1)]),_:1}),c(v,{description:"Hoogste cijfer",insignificant:""},{default:r(()=>[d(u(Math.max(...e(x)).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})),1)]),_:1})]),_:1}),c(v,{id:"bar-chart-title",description:"Histogram (afgeronde behaalde cijfers)"}),y("div",Ne,[(o(),g(N,null,T(10,t=>y("div",{"data-grade":t,"data-frequency":e(M)[t],"data-percentage":Math.round(e(M)[t]/e(x).length*100),style:X(`min-height: ${e(M)[t]/Math.max(...Object.values(e(M)))*100||0}%; max-height: ${e(M)[t]/Math.max(...Object.values(e(M)))*100||0}%`)},null,12,Le)),64))])]),key:"0"}:{name:"content",fn:r(()=>[d(" Er zijn geen cijfers geselecteerd. ")]),key:"1"}]),1024)):L("",!0),e(p).calculator.state?(o(),g("div",Ce,[c(K,{id:"calculator-added",small:""},{title:r(()=>[d("Toegevoegde cijfers")]),content:r(()=>[c(Y,{name:"list",tag:"ul"},{default:r(()=>[(o(!0),g(N,null,T(e(f),(t,s)=>(o(),g("li",{key:t.column,tabindex:"1",role:"button",onClick:i=>e(f).splice(s,1),onKeyup:[z(i=>e(f).splice(s,1),["enter"]),z(i=>e(f).splice(s,1),["space"])]},u(`${t.result.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})} (${t.weight}\xD7) \u2014 ${t.column}, ${t.title}`),41,Me))),128)),e(f).length<1?(o(),g("li",Te," Klik op de cijfers die je wilt toevoegen aan de berekening. ")):L("",!0)]),_:1})]),_:1}),c(K,{id:"calculator-result",small:""},{content:r(()=>[c(D,{stretch:"",uniform:"",wrap:""},{default:r(()=>[c(v,{description:"Gemiddelde (incl. weging)"},{default:r(()=>{var t;return[d(u(((t=e(I))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))||"?"),1)]}),_:1}),c(v,{description:"Mediaan"},{default:r(()=>{var t;return[d(u(((t=ie(e(f).map(s=>s.result)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))||"?"),1)]}),_:1})]),_:1})]),_:1}),c(K,{id:"calculator-chart",small:""},{title:r(()=>[d("Toekomstig cijfer")]),subtitle:r(()=>[c(Y,{name:"list"},{default:r(()=>[e(h).x&&e(h).y.toFixed(2)>e(I).toFixed(2)?(o(),g("span",ze," Als je een "+u(e(h).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" haalt, dan stijgt je gemiddelde tot een "+u(e(h).y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+". ",1)):e(h).x&&e(h).y.toFixed(2)<e(I).toFixed(2)?(o(),g("span",Oe," Als je een "+u(e(h).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" haalt, dan zakt je gemiddelde tot een "+u(e(h).y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+". ",1)):e(h).x>0?(o(),g("span",Ke," Als je een "+u(e(h).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" haalt, dan blijf je gemiddeld een "+u(e(h).y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+" staan. ",1)):e(f).length>0&&e(O).x<1.05?(o(),g("span",qe," Met een cijfer dat "+u(e($))+"\xD7 meetelt blijf je in elk geval een voldoende staan. ",1)):e(f).length>0&&e(O).y<5.45?(o(),g("span",Ge," Met een cijfer dat "+u(e($))+"\xD7 meetelt kun je geen voldoende komen te staan.. ",1)):e(f).length>0&&e(O).x>1.05?(o(),g("span",Ae," Haal een "+u(e(O).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" "+u(e(O).x<=9.95?"of hoger":"")+" om een voldoende te "+u(e(I)>=5.45?"blijven":"komen")+" staan. ",1)):(o(),g("span",Be," Zie hier wat je moet halen en wat je komt te staan. "))]),_:1})]),content:r(()=>[re(y("input",{type:"number","onUpdate:modelValue":n[8]||(n[8]=t=>V($)?$.value=t:$=t)},null,512),[[xe,e($)]]),c(D,{stretch:"",gapless:"",onMouseleave:n[9]||(n[9]=t=>V(h)?h.value={}:h={})},{default:r(()=>[(o(!0),g(N,null,T(e(te),t=>(o(),g("div",{class:"grid-column","data-x":t.x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}),"data-y":t.y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}),onMouseenter:s=>V(h)?h.value={x:t.x,y:t.y}:h={x:t.x,y:t.y}},null,40,Ie))),256))]),_:1})]),_:1})])):L("",!0)]),_:1})],2)],512)],64)}}};export{We as default};
