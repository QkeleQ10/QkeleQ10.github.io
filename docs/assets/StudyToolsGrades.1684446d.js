import{o as s,d as g,h as j,t as u,m as oe,n as $,q as se,u as ue,a as ce,b as de,r as w,p as D,c as me,e as y,f as c,T as B,g as d,w as r,_ as ee,i as ge,k as e,s as I,v as te,F as N,x as M,y as ie,z as fe,A as V,B as z,C as O,D as ne,j as A,E as he,G as pe}from"./index.afe1b887.js";const ve=["data-insignificant","data-stretch"],_e={key:0},k={__name:"Metric",props:{description:String,extra:String,insignificant:Boolean,stretch:Boolean},setup(L){return(P,E)=>(s(),g("div",{class:"metric","data-insignificant":L.insignificant,"data-stretch":L.stretch},[j("span",null,u(L.description),1),j("span",null,[oe(P.$slots,"default"),L.extra?(s(),g("span",_e," ("+u(L.extra)+")",1)):$("",!0)])],8,ve))}};const ye={id:"table-wrapper"},ke=["data-excluded"],xe=["tabindex","aria-label","title","data-current","data-included","onClick","onKeyup"],be={key:1},we={id:"bar-chart"},je=["data-grade","data-frequency","data-percentage"],Se={id:"calculator",key:"calculator"},$e=["onClick","onKeyup"],Fe={key:0},De={key:"hovering-increase"},Ne={key:"hovering-decrease"},Le={key:"hovering-same"},Ce={key:"sufficient-guaranteed"},Me={key:"insufficient-guaranteed"},ze={key:"advice"},Te={key:"placeholder"},Oe=["data-x","data-y","onMouseenter"],qe={__name:"StudyToolsGrades",setup(L){se({title:"Cijferback-up | Study Tools"}),ue().setScheme("st"),ce(),de();const E=w(),K=w(),ae=w();let S=w(!(window.innerWidth<1e3)),v=w({meta:{state:!0,title:"Details",icon:"info",requiresOne:!0},stats:{state:!0,title:"Statistieken",icon:"analytics",requiresOne:!0,disallow:"calculator"},calculator:{state:!1,title:"Cijfercalculator",icon:"calculate",requiresOne:!0,disallow:"stats"}}),_=w([]),q=w(""),x=D(()=>{let n=[];return _.value.forEach((a,l)=>{var t;if(!f.value.has(l))for(let o of a){let i=Number((t=o.result)==null?void 0:t.replace(",",".")),m=o.className;(!(m!=null&&m.includes("gemiddeldecolumn"))||(m==null?void 0:m.includes("herkansingKolom"))||(m==null?void 0:m.includes("heeftonderliggendekolommen")))&&typeof i=="number"&&!isNaN(i)&&n.push(i)}}),n}),W=D(()=>x.value.filter(n=>n>=5.5)),H=D(()=>x.value.filter(n=>n<5.5)),C=D(()=>{const n=x.value.map(l=>Math.round(l)),a={};for(let l=1;l<=10;l++)a[l]=0;return n.forEach(l=>{l>=1&&l<=10&&a[l]++}),a}),f=w(new Set),b=w({result:"",weight:"",column:"",title:""}),h=w([]),p=w({x:0,y:0}),F=w(1),G=D(()=>Z(h.value.map(n=>n.result),h.value.map(n=>n.weight))),Q=D(()=>{let n=[];for(let a=0,l=1;l<10;a++,l=l+.1)n[a]={x:l,y:Z(h.value.map(t=>t.result).concat([l]),h.value.map(t=>t.weight).concat([F.value]))||0};return n}),T=D(()=>Q.value.find(n=>n.y>=5.45)||{x:0,y:0});function R(n,a,l,t){if((n==null?void 0:n.length)>0&&(b.value={result:n,weight:a,column:l,title:t}),v.value.calculator.state&&(n==null?void 0:n.length)>0&&Number(n.replace(",","."))){let o=h.value.findIndex(i=>i.result===Number(n.replace(",","."))&&i.weight===Number(a)&&i.column===l&&i.title===t);o>=0?h.value.splice(o,1):h.value.push({result:Number(n.replace(",",".")),weight:Number(a),column:l,title:t})}}function le(n){let a=v.value[n];v.value[n].state=!a.state,a.state&&a.disallow&&(v.value[a.disallow].state=!1),Object.values(v.value).filter(l=>l.requiresOne===!0).every(l=>!l.state)&&(Object.values(v.value).filter(l=>l.requiresOne===!0)[0].state=!0)}function J(n){console.log(n),f.value.has(n)?f.value.delete(n):f.value.add(n)}function U(n){n?f.value.clear():_.value.forEach((a,l)=>{l!==0&&(f.value.has(l)?f.value.delete(l):f.value.add(l))})}function re(n){_.value=[],q.value="",f.value.clear(),b.value={result:"",weight:"",column:"",title:""},h.value=[];let a=new FileReader;a.onload=async l=>{let t=JSON.parse(l.target.result);_.value.push(...t.list.reduce((o,i)=>(i.type==="rowheader"&&o.push([]),o[o.length-1].push(i),o),[[]])),q.value=new Date(t.date).toLocaleString("nl-NL",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},a.readAsText(n.target.files[0])}function Z(n=[],a=[]){let l=n.map((o,i)=>{var Y;let m=(Y=a[i])!=null?Y:1;return[o*m,m]}).reduce((o,i)=>[o[0]+i[0],o[1]+i[1]],[0,0]),t=l[0]/l[1];return isNaN(t)?void 0:t}function X(n=[]){let a=[...n].sort();var l=Math.floor(a.length/2);if(a.length%2)return a[l];let t=(a[l-1]+a[l])/2;return isNaN(t)?void 0:t}return(n,a)=>{const l=me("Button");return s(),g(N,null,[(s(),y(B,{to:"#hero-title"},[c("Cijferback-up")])),(s(),y(B,{to:"#hero-description"},[c(" Importeer je eerder geback-upte cijferoverzicht met onderstaande knop. ")])),(s(),y(B,{to:"#hero-buttons"},[d(l,{icon:"upload",class:"hero",onClick:a[0]||(a[0]=t=>K.value.click())},{default:r(()=>[c(u(n.$i18n("Import grades")),1)]),_:1}),j("input",{type:"file",accept:"application/JSON",onChange:re,onInput:a[1]||(a[1]=t=>E.value.scrollIntoView({behavior:"smooth"})),ref_key:"input",ref:K,id:"input",style:{display:"none"}},null,544)])),(s(),y(B,{to:"#hero-icon"},[d(ee,null,{default:r(()=>[c("school")]),_:1})])),j("section",{ref_key:"grades",ref:E,id:"grades",class:"full max-full"},[d(ge,{icon:"summarize"},{default:r(()=>[c("Cijferoverzicht")]),_:1}),c(" "+u(e(f))+" "+u(e(_).length)+" ",1),d(I,{name:"horizontal",tag:"div",class:"collection-horizontal no-row-gap wrap",id:"grade-actions"},{default:r(()=>[d(l,{key:"aside-toggler",role:"checkbox",class:"secondary",title:"Zijpaneel weergeven of verbergen",icon:e(S)?"right_panel_close":"right_panel_open",filled:e(S),"aria-checked":e(S),onClick:a[2]||(a[2]=t=>V(S)?S.value=!e(S):S=!e(S))},{default:r(()=>[c("Zijpaneel")]),_:1},8,["icon","filled","aria-checked"]),e(_).length>0&&e(f).size===0?(s(),y(l,{key:"select-empty",icon:"check_box_outline_blank",class:"secondary",title:"Alles deselecteren",onClick:a[3]||(a[3]=t=>U())},{default:r(()=>[c(" Alles deselecteren ")]),_:1})):e(_).length>0&&e(f).size>0?(s(),y(l,{key:"select-all",icon:"select_check_box",class:"secondary",title:"Alles selecteren",onClick:a[4]||(a[4]=t=>U(!0))},{default:r(()=>[c(" Alles selecteren ")]),_:1})):$("",!0),e(_).length>0&&e(f).size>0&&e(f).size<e(_).length-1?(s(),y(l,{key:"select-invert",icon:"indeterminate_check_box",class:"secondary",title:"Selectie omkeren",onClick:a[5]||(a[5]=t=>U())},{default:r(()=>[c(" Selectie omkeren ")]),_:1})):$("",!0),e(_).length<1?(s(),y(l,{key:"import-big",icon:"upload",title:n.$i18n("Import grades"),onClick:a[6]||(a[6]=t=>K.value.click())},{default:r(()=>[c(u(n.$i18n("Import grades")),1)]),_:1},8,["title"])):(s(),y(l,{key:"import-small",icon:"upload",class:"secondary",title:n.$i18n("Import grades"),onClick:a[7]||(a[7]=t=>K.value.click())},null,8,["title"]))]),_:1}),j("div",{ref_key:"container",ref:ae,id:"container",class:te(e(S)?"":"hide-aside")},[j("div",ye,[j("table",null,[(s(!0),g(N,null,M(e(_),(t,o)=>(s(),g("tr",{"data-excluded":e(f).has(o),key:o},[(s(!0),g(N,null,M(t,i=>(s(),g("td",{class:te(i.className),key:i.column},[j("span",{tabindex:i.result?1:-1,role:"button","aria-label":i.result?`${(i.className.includes("gemiddeldecolumn")?"Gemiddeld ":"")+i.result} voor ${t[0].title}. Titel: ${i.title}. Kolom: ${i.column}. Telt ${i.weight} keer mee.`:"Lege cel",title:`${i.result||"Lege cel"}
${i.title||"Geen kolomkop"}`,"data-current":e(b).result===i.result&&e(b).weight===i.weight&&e(b).column===i.column&&e(b).title===i.title,"data-included":e(v).calculator.state&&e(h).some(m=>m.result===Number(String(i.result).replace(",","."))&&m.weight===Number(i.weight)&&m.column===i.column&&m.title===i.title),onClick:m=>R(i.result,i.weight,i.column,i.title),onKeyup:[z(m=>R(i.result,i.weight,i.column,i.title),["enter"]),z(m=>R(i.result,i.weight,i.column,i.title),["space"])]},u(i.type==="rowheader"?i.title:i.result),41,xe),i.type==="rowheader"?(s(),y(ee,{key:0,"aria-hidden":"false",role:"button",tabindex:"1",title:e(f).has(o)?"Weer aan selectie toevoegen":"Uit selectie verwijderen",filled:!e(f).has(o),onClick:m=>J(o),onKeyup:[z(m=>J(o),["enter"]),z(m=>J(o),["space"])]},{default:r(()=>[c(u(e(f).has(o)?"crop_square":"check_box"),1)]),_:2},1032,["title","filled","onClick","onKeyup"])):$("",!0)],2))),128))],8,ke))),128))]),ie(j("p",null,'Je cijferoverzicht zal hier verschijnen wanneer je deze hebt ge\xFCpload met de knop "'+u(n.$i18n("Import grades"))+'".',513),[[fe,e(_).length===0]])]),d(I,{name:"aside",tag:"div",id:"aside"},{default:r(()=>[d(O,{id:"view",key:"view",gapless:"",stretch:"",uniform:""},{default:r(()=>[(s(!0),g(N,null,M(e(v),(t,o)=>(s(),y(l,{icon:e(v)[o].icon,filled:e(v)[o].state,role:"checkbox",class:"secondary","aria-checked":e(v)[o].state,title:e(v)[o].title+(e(v)[o].state?" verbergen":" weergeven"),onClick:i=>le(o)},null,8,["icon","filled","aria-checked","title","onClick"]))),256))]),_:1}),e(v).meta.state?(s(),y(A,{id:"meta",key:"meta",small:""},ne({title:r(()=>[c("Details")]),content:r(()=>[e(_).length>0?(s(),y(O,{key:0,stretch:"",uniform:"",wrap:""},{default:r(()=>[d(k,{description:"Resultaat",stretch:""},{default:r(()=>[c(u(e(b).result||"?"),1)]),_:1}),d(k,{description:"Weegfactor",insignificant:""},{default:r(()=>[c(u(e(b).weight>0?e(b).weight+"\xD7":e(b).weight===0?"formatief":"?"),1)]),_:1}),d(k,{description:"Kolomnaam",insignificant:""},{default:r(()=>[c(u(e(b).column||"?"),1)]),_:1}),d(k,{description:"Kolomkop",insignificant:"",stretch:""},{default:r(()=>[c(u(e(b).title||"Klik op een cijfer"),1)]),_:1})]),_:1})):(s(),g("p",be,"Upload je cijfers om details te bekijken."))]),_:2},[e(q)&&e(_).length>0?{name:"subtitle",fn:r(()=>[c("Gegevens ge\xEFmporteerd uit back-up van "+u(e(q)),1)]),key:"0"}:void 0]),1024)):$("",!0),e(v).stats.state?(s(),y(A,{id:"grade-stats",key:"grade-stats",small:""},ne({title:r(()=>[c("Statistieken")]),_:2},[e(x).length>0?{name:"content",fn:r(()=>[d(O,{stretch:"",uniform:"",wrap:""},{default:r(()=>[d(k,{description:"Gemiddelde (excl. weging)"},{default:r(()=>{var t;return[c(u(((t=Z(e(x)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:3,maximumFractionDigits:3}))||"?"),1)]}),_:1}),d(k,{description:"Mediaan",insignificant:""},{default:r(()=>{var t;return[c(u(((t=X(e(x)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))||"?"),1)]}),_:1}),d(k,{description:"Aantal",insignificant:""},{default:r(()=>[c(u(e(x).length),1)]),_:1}),d(k,{description:"Voldoendes",insignificant:"",extra:e(W).length?(e(W).length/e(x).length*100).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})+"%":""},{default:r(()=>[c(u(e(W).length||"geen"),1)]),_:1},8,["extra"]),d(k,{description:"Onvoldoendes",insignificant:"",extra:e(H).length?(e(H).length/e(x).length*100).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})+"%":""},{default:r(()=>[c(u(e(H).length||"geen"),1)]),_:1},8,["extra"]),d(k,{description:"Laagste cijfer",insignificant:""},{default:r(()=>[c(u(Math.min(...e(x)).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})),1)]),_:1}),d(k,{description:"Hoogste cijfer",insignificant:""},{default:r(()=>[c(u(Math.max(...e(x)).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})),1)]),_:1})]),_:1}),d(k,{id:"bar-chart-title",description:"Histogram (afgeronde behaalde cijfers)"}),j("div",we,[(s(),g(N,null,M(10,t=>j("div",{"data-grade":t,"data-frequency":e(C)[t],"data-percentage":Math.round(e(C)[t]/e(x).length*100),style:he(`min-height: ${e(C)[t]/Math.max(...Object.values(e(C)))*100||0}%; max-height: ${e(C)[t]/Math.max(...Object.values(e(C)))*100||0}%`)},null,12,je)),64))])]),key:"0"}:{name:"content",fn:r(()=>[c(" Er zijn geen cijfers geselecteerd. ")]),key:"1"}]),1024)):$("",!0),e(v).calculator.state?(s(),g("div",Se,[d(A,{id:"calculator-added",small:""},{title:r(()=>[c("Toegevoegde cijfers")]),content:r(()=>[d(I,{name:"list",tag:"ul"},{default:r(()=>[(s(!0),g(N,null,M(e(h),(t,o)=>(s(),g("li",{key:t.column,tabindex:"1",role:"button",onClick:i=>e(h).splice(o,1),onKeyup:[z(i=>e(h).splice(o,1),["enter"]),z(i=>e(h).splice(o,1),["space"])]},u(`${t.result.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})} (${t.weight}\xD7) \u2014 ${t.column}, ${t.title}`),41,$e))),128)),e(h).length<1?(s(),g("li",Fe," Klik op de cijfers die je wilt toevoegen aan de berekening. ")):$("",!0)]),_:1})]),_:1}),d(A,{id:"calculator-result",small:""},{content:r(()=>[d(O,{stretch:"",uniform:"",wrap:""},{default:r(()=>[d(k,{description:"Gemiddelde (incl. weging)"},{default:r(()=>{var t;return[c(u(((t=e(G))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))||"?"),1)]}),_:1}),d(k,{description:"Mediaan"},{default:r(()=>{var t;return[c(u(((t=X(e(h).map(o=>o.result)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))||"?"),1)]}),_:1})]),_:1})]),_:1}),d(A,{id:"calculator-chart",small:""},{title:r(()=>[c("Toekomstig cijfer")]),subtitle:r(()=>[d(I,{name:"list"},{default:r(()=>[e(p).x&&e(p).y.toFixed(2)>e(G).toFixed(2)?(s(),g("span",De," Als je een "+u(e(p).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" haalt, dan stijgt je gemiddelde tot een "+u(e(p).y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+". ",1)):e(p).x&&e(p).y.toFixed(2)<e(G).toFixed(2)?(s(),g("span",Ne," Als je een "+u(e(p).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" haalt, dan zakt je gemiddelde tot een "+u(e(p).y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+". ",1)):e(p).x>0?(s(),g("span",Le," Als je een "+u(e(p).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" haalt, dan blijf je gemiddeld een "+u(e(p).y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))+" staan. ",1)):e(h).length>0&&e(T).x<1.05?(s(),g("span",Ce," Met een cijfer dat "+u(e(F))+"\xD7 meetelt blijf je in elk geval een voldoende staan. ",1)):e(h).length>0&&e(T).y<5.45?(s(),g("span",Me," Met een cijfer dat "+u(e(F))+"\xD7 meetelt kun je geen voldoende komen te staan.. ",1)):e(h).length>0&&e(T).x>1.05?(s(),g("span",ze," Haal een "+u(e(T).x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))+" "+u(e(T).x<=9.95?"of hoger":"")+" om een voldoende te "+u(e(G)>=5.45?"blijven":"komen")+" staan. ",1)):(s(),g("span",Te," Zie hier wat je moet halen en wat je komt te staan. "))]),_:1})]),content:r(()=>[ie(j("input",{type:"number","onUpdate:modelValue":a[8]||(a[8]=t=>V(F)?F.value=t:F=t)},null,512),[[pe,e(F)]]),d(O,{stretch:"",gapless:"",onMouseleave:a[9]||(a[9]=t=>V(p)?p.value={}:p={})},{default:r(()=>[(s(!0),g(N,null,M(e(Q),t=>(s(),g("div",{class:"grid-column","data-x":t.x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}),"data-y":t.y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}),onMouseenter:o=>V(p)?p.value={x:t.x,y:t.y}:p={x:t.x,y:t.y}},null,40,Oe))),256))]),_:1})]),_:1})])):$("",!0)]),_:1})],2)],512)],64)}}};export{qe as default};
