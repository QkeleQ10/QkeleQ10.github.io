import{o as d,d as f,f as p,t as m,p as re,s as F,q as se,u as oe,a as ue,b as ce,r as b,v as T,c as de,e as N,n as W,g as e,h as o,w as s,_ as x,i as Y,T as me,j as ge,x as Z,F as $,y as D,z as P,A as fe,B as Q,l as u,C as L,D as ee,k as M,E as he,G as pe}from"./index.72a483ee.js";const ve=["data-insignificant","data-stretch"],_e={key:0},v={__name:"Metric",props:{description:String,extra:String,insignificant:Boolean,stretch:Boolean},setup(j){return(R,q)=>(d(),f("div",{class:"metric","data-insignificant":j.insignificant,"data-stretch":j.stretch},[p("span",null,m(j.description),1),p("span",null,[re(R.$slots,"default"),j.extra?(d(),f("span",_e," ("+m(j.extra)+")",1)):F("",!0)])],8,ve))}};const ye=p("h1",{class:"section-title"},"Cijferback-up",-1),ke=p("p",{class:"section-about"},"Importeer je eerder geback-upte cijferoverzicht met onderstaande knop.",-1),be=[ye,ke],we={id:"table-wrapper"},xe=["data-excluded"],$e=["tabindex","aria-label","title","data-current","data-included","onClick","onKeyup"],je={key:1},Se={id:"bar-chart"},Ne=["data-grade","data-frequency","data-percentage"],De={id:"calculator",key:"calculator"},Le=["onClick","onKeyup"],Fe={key:0},Ce=["data-x","data-y"],Oe={__name:"StudyToolsGrades",setup(j){se({title:"Cijferback-up"}),oe().setScheme("st");const{x:q,y:U,sourceType:Te}=ue(),{width:K,height:O}=ce();Array.from({length:91},(n,i)=>i/10+1);const H=b(),B=b(),te=b();let g=b({aside:{state:!0,title:"Zijbalk",icon:"view_sidebar"},meta:{state:!0,title:"Details",icon:"info",requiresOne:!0},stats:{state:!0,title:"Statistieken",icon:"insights",requiresOne:!0,disallow:"calculator"},calculator:{state:!1,title:"Cijfercalculator",icon:"calculate",requiresOne:!0,disallow:"stats"}}),w=b([]),z=b(""),_=T(()=>{let n=[];return w.value.forEach((i,l)=>{var t;if(!k.value.has(l))for(let r of i){let a=Number((t=r.result)==null?void 0:t.replace(",",".")),c=r.className;(!(c!=null&&c.includes("gemiddeldecolumn"))||(c==null?void 0:c.includes("herkansingKolom"))||(c==null?void 0:c.includes("heeftonderliggendekolommen")))&&typeof a=="number"&&!isNaN(a)&&n.push(a)}}),n}),G=T(()=>_.value.filter(n=>n>=5.5)),A=T(()=>_.value.filter(n=>n<5.5)),S=T(()=>{const n=_.value.map(l=>Math.round(l)),i={};for(let l=1;l<=10;l++)i[l]=0;return n.forEach(l=>{l>=1&&l<=10&&i[l]++}),i}),k=b(new Set),y=b({result:"",weight:"",column:"",title:""}),h=b([]),C=b(1),ae=T(()=>{let n=[];for(let i=0,l=1;l<10;i++,l=l+.1)n[i]={x:l,y:E(h.value.map(t=>t.result).concat([l]),h.value.map(t=>t.weight).concat([C.value]))};return console.log(n),n});function I(n,i,l,t){if((n==null?void 0:n.length)>0&&(y.value={result:n,weight:i,column:l,title:t}),g.value.calculator.state&&(n==null?void 0:n.length)>0&&Number(n.replace(",","."))){let r=h.value.findIndex(a=>a.result===Number(n.replace(",","."))&&a.weight===Number(i)&&a.column===l&&a.title===t);r>=0?h.value.splice(r,1):h.value.push({result:Number(n.replace(",",".")),weight:Number(i),column:l,title:t})}}function ie(n){let i=g.value[n];g.value[n].state=!i.state,i.state&&i.disallow&&(g.value[i.disallow].state=!1),Object.values(g.value).filter(l=>l.requiresOne===!0).every(l=>!l.state)&&(Object.values(g.value).filter(l=>l.requiresOne===!0)[0].state=!0)}function V(n){k.value.has(n)?k.value.delete(n):k.value.add(n)}function ne(){w.value.forEach((n,i)=>{k.value.has(i)?k.value.delete(i):k.value.add(i)})}function le(n){w.value=[],z.value="",k.value.clear(),y.value={result:"",weight:"",column:"",title:""},h.value=[];let i=new FileReader;i.onload=async l=>{let t=JSON.parse(l.target.result);w.value.push(...t.list.reduce((r,a)=>(a.type==="rowheader"&&r.push([]),r[r.length-1].push(a),r),[[]])),z.value=new Date(t.date).toLocaleString("nl-NL",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},i.readAsText(n.target.files[0])}function E(n=[],i=[]){let l=n.map((r,a)=>{var X;let c=(X=i[a])!=null?X:1;return[r*c,c]}).reduce((r,a)=>[r[0]+a[0],r[1]+a[1]],[0,0]),t=l[0]/l[1];return isNaN(t)?void 0:t}function J(n=[]){let i=[...n].sort();var l=Math.floor(i.length/2);if(i.length%2)return i[l];let t=(i[l-1]+i[l])/2;return isNaN(t)?void 0:t}return(n,i)=>{const l=de("Button");return d(),f($,null,[(d(),N(me,{to:"#hero"},[p("div",{style:W({transform:`translateX(${(e(q)-e(K)/2)*10/e(K)}px) translateY(${(e(U)-e(O)/2)*10/e(O)}px)`})},be,4),o(x,{id:"hero-buttons"},{default:s(()=>[o(l,{icon:"upload_file",class:"hero",onClick:i[0]||(i[0]=t=>B.value.click())},{default:s(()=>[u(m(n.$i18n("Import grades")),1)]),_:1}),p("input",{type:"file",accept:".json",onChange:le,onInput:i[1]||(i[1]=t=>H.value.scrollIntoView({behavior:"smooth"})),ref_key:"input",ref:B,id:"input",style:{display:"none"}},null,544)]),_:1}),o(Y,{style:W({transform:`translateX(${-((e(q)-e(K)/2)*50/e(K))}px) translateY(${-((e(U)-e(O)/2)*50/e(O))}px)`})},{default:s(()=>[u(" school")]),_:1},8,["style"])])),p("section",{ref_key:"grades",ref:H,id:"grades",class:"full max-full"},[o(ge,{icon:"summarize"},{default:s(()=>[u("Cijferoverzicht")]),_:1}),o(x,{id:"grade-actions",wrap:""},{default:s(()=>[o(x,{gapless:""},{default:s(()=>[(d(!0),f($,null,D(e(g),(t,r)=>(d(),N(l,{icon:e(g)[r].icon,class:"narrow toggle","data-state":e(g)[r].state,title:e(g)[r].title+(e(g)[r].state?" verbergen":" weergeven"),onClick:a=>ie(r)},null,8,["icon","data-state","title","onClick"]))),256))]),_:1}),o(l,{icon:"deselect",class:"secondary",title:"Selectie omkeren",onClick:i[2]||(i[2]=t=>ne())}),o(l,{icon:"upload_file",class:"secondary",title:n.$i18n("Import grades"),onClick:i[3]||(i[3]=t=>B.value.click())},{default:s(()=>[u(m(n.$i18n("Import grades")),1)]),_:1},8,["title"])]),_:1}),p("div",{ref_key:"container",ref:te,id:"container",class:Z(e(g).aside.state?"":"hide-aside")},[p("div",we,[p("table",null,[(d(!0),f($,null,D(e(w),(t,r)=>(d(),f("tr",{"data-excluded":e(k).has(r),key:r},[(d(!0),f($,null,D(t,a=>(d(),f("td",{class:Z(a.className),key:a.column},[p("span",{tabindex:a.result?1:-1,role:"button","aria-label":a.result?`${(a.className.includes("gemiddeldecolumn")?"Gemiddeld ":"")+a.result} voor ${t[0].title}. Titel: ${a.title}. Kolom: ${a.column}. Telt ${a.weight} keer mee.`:"Lege cel",title:`${a.result||"Lege cel"}
${a.title||"Geen kolomkop"}`,"data-current":e(y).result===a.result&&e(y).weight===a.weight&&e(y).column===a.column&&e(y).title===a.title,"data-included":e(g).calculator.state&&e(h).some(c=>c.result===Number(String(a.result).replace(",","."))&&c.weight===Number(a.weight)&&c.column===a.column&&c.title===a.title),onClick:c=>I(a.result,a.weight,a.column,a.title),onKeyup:[L(c=>I(a.result,a.weight,a.column,a.title),["enter"]),L(c=>I(a.result,a.weight,a.column,a.title),["space"])]},m(a.type==="rowheader"?a.title:a.result),41,$e),a.type==="rowheader"?(d(),N(Y,{key:0,"aria-hidden":"false",role:"button",tabindex:"1",title:e(k).has(r)?"Weer aan selectie toevoegen":"Uit selectie verwijderen",onClick:c=>V(r),onKeyup:[L(c=>V(r),["enter"]),L(c=>V(r),["space"])]},{default:s(()=>[u(m(e(k).has(r)?"check_box_outline_blank":"check_box"),1)]),_:2},1032,["title","onClick","onKeyup"])):F("",!0)],2))),128))],8,xe))),128))]),P(p("p",null,'Je cijferoverzicht zal hier verschijnen wanneer je deze hebt ge\xFCpload met de knop "'+m(n.$i18n("Import grades"))+'".',513),[[fe,e(w).length===0]])]),o(Q,{name:"aside",tag:"div",id:"aside"},{default:s(()=>[e(g).meta.state?(d(),N(M,{id:"meta",key:"meta",small:""},ee({title:s(()=>[u("Details")]),content:s(()=>[e(w).length>0?(d(),N(x,{key:0,stretch:"",uniform:"",wrap:""},{default:s(()=>[o(v,{description:"Resultaat",stretch:""},{default:s(()=>[u(m(e(y).result||"?"),1)]),_:1}),o(v,{description:"Weegfactor",insignificant:""},{default:s(()=>[u(m(e(y).weight>0?e(y).weight+"\xD7":e(y).weight===0?"formatief":"?"),1)]),_:1}),o(v,{description:"Kolomnaam",insignificant:""},{default:s(()=>[u(m(e(y).column||"?"),1)]),_:1}),o(v,{description:"Kolomkop",insignificant:"",stretch:""},{default:s(()=>[u(m(e(y).title||"Klik op een cijfer"),1)]),_:1})]),_:1})):(d(),f("p",je,"Upload je cijfers om details te bekijken."))]),_:2},[e(z)&&e(w).length>0?{name:"subtitle",fn:s(()=>[u("Gegevens ge\xEFmporteerd uit back-up van "+m(e(z)),1)]),key:"0"}:void 0]),1024)):F("",!0),e(g).stats.state?(d(),N(M,{id:"grade-stats",key:"grade-stats",small:""},ee({title:s(()=>[u("Statistieken")]),_:2},[e(_).length>0?{name:"content",fn:s(()=>[o(x,{stretch:"",uniform:"",wrap:""},{default:s(()=>[o(v,{description:"Gemiddelde (excl. weging)"},{default:s(()=>{var t;return[u(m(((t=E(e(_)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:3,maximumFractionDigits:3}))||"?"),1)]}),_:1}),o(v,{description:"Mediaan",insignificant:""},{default:s(()=>{var t;return[u(m(((t=J(e(_)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))||"?"),1)]}),_:1}),o(v,{description:"Aantal",insignificant:""},{default:s(()=>[u(m(e(_).length),1)]),_:1}),o(v,{description:"Voldoendes",insignificant:"",extra:e(G).length?(e(G).length/e(_).length*100).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})+"%":""},{default:s(()=>[u(m(e(G).length||"geen"),1)]),_:1},8,["extra"]),o(v,{description:"Onvoldoendes",insignificant:"",extra:e(A).length?(e(A).length/e(_).length*100).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})+"%":""},{default:s(()=>[u(m(e(A).length||"geen"),1)]),_:1},8,["extra"]),o(v,{description:"Laagste cijfer",insignificant:""},{default:s(()=>[u(m(Math.min(...e(_)).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})),1)]),_:1}),o(v,{description:"Hoogste cijfer",insignificant:""},{default:s(()=>[u(m(Math.max(...e(_)).toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})),1)]),_:1})]),_:1}),o(v,{id:"bar-chart-title",description:"Histogram (afgeronde behaalde cijfers)"}),p("div",Se,[(d(),f($,null,D(10,t=>p("div",{"data-grade":t,"data-frequency":e(S)[t],"data-percentage":Math.round(e(S)[t]/e(_).length*100),style:W(`min-height: ${e(S)[t]/Math.max(...Object.values(e(S)))*100||0}%; max-height: ${e(S)[t]/Math.max(...Object.values(e(S)))*100||0}%`)},null,12,Ne)),64))])]),key:"0"}:{name:"content",fn:s(()=>[u(" Er zijn geen cijfers geselecteerd. ")]),key:"1"}]),1024)):F("",!0),e(g).calculator.state?(d(),f("div",De,[o(M,{id:"calculator-added",small:""},{title:s(()=>[u("Toegevoegde cijfers")]),content:s(()=>[o(Q,{name:"list",tag:"ul"},{default:s(()=>[(d(!0),f($,null,D(e(h),(t,r)=>(d(),f("li",{key:t.column,tabindex:"1",role:"button",onClick:a=>e(h).splice(r,1),onKeyup:[L(a=>e(h).splice(r,1),["enter"]),L(a=>e(h).splice(r,1),["space"])]},m(`${t.result.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1})} (${t.weight}\xD7) \u2014 ${t.column}, ${t.title}`),41,Le))),128)),e(h).length<1?(d(),f("li",Fe,"Klik op de cijfers die je wilt toevoegen aan de berekening.")):F("",!0)]),_:1})]),_:1}),o(M,{id:"calculator-result",small:""},{content:s(()=>[o(x,{stretch:"",uniform:"",wrap:""},{default:s(()=>[o(v,{description:"Gemiddelde (incl. weging)"},{default:s(()=>{var t;return[u(m(((t=E(e(h).map(r=>r.result),e(h).map(r=>r.weight)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2}))||"?"),1)]}),_:1}),o(v,{description:"Mediaan"},{default:s(()=>{var t;return[u(m(((t=J(e(h).map(r=>r.result)))==null?void 0:t.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}))||"?"),1)]}),_:1})]),_:1})]),_:1}),o(M,{id:"calculator-chart",small:""},{title:s(()=>[u("Toekomstig cijfer")]),subtitle:s(()=>[u("Zie hier wat je moet halen en wat je komt te staan.")]),content:s(()=>[P(p("input",{type:"number","onUpdate:modelValue":i[4]||(i[4]=t=>pe(C)?C.value=t:C=t)},null,512),[[he,e(C)]]),o(x,{stretch:"",gapless:""},{default:s(()=>[(d(!0),f($,null,D(e(ae),t=>(d(),f("div",{class:"grid-column","data-x":t.x.toLocaleString("nl-NL",{minimumFractionDigits:1,maximumFractionDigits:1}),"data-y":t.y.toLocaleString("nl-NL",{minimumFractionDigits:2,maximumFractionDigits:2})},null,8,Ce))),256))]),_:1})]),_:1})])):F("",!0)]),_:1})],2)],512)],64)}}};export{Oe as default};
